ì±„íŒ… êµ¬ì¡°ë¥¼ ë°”ê¾¸ê¸° ìœ„í•´ í™•ì¸í•´ì•¼ í•  í•µì‹¬ íŒŒì¼ë“¤ì„ ì•ˆë‚´ë“œë¦¬ê² ìŠµë‹ˆë‹¤! [[memory:5422055]]ì— ë”°ë¼ íŒŒì¼ ìœ„ì¹˜ì™€ ì½”ë“œ ì„¤ëª…ì„ ì œê³µí•˜ê² ìŠµë‹ˆë‹¤.

## ğŸ“¡ ì±„íŒ… êµ¬ì¡° í•µì‹¬ íŒŒì¼ë“¤

### **1. í”„ë¡ íŠ¸ì—”ë“œ - ì±„íŒ… ì „ì†¡/ìˆ˜ì‹  ë¡œì§**
Ran tool
Ran tool
Ran tool
Ran tool
Ran tool
Ran tool
## ğŸ”§ ì±„íŒ… êµ¬ì¡° ë³€ê²½ í•µì‹¬ í¬ì¸íŠ¸

### **1. ğŸ“¤ ë©”ì‹œì§€ ì „ì†¡ êµ¬ì¡° (ChatContext.tsx)**

**ìœ„ì¹˜**: `front/src/stores/ChatContext.tsx` ë¼ì¸ 191-201

```typescript
// í˜„ì¬ ì „ì†¡ payload êµ¬ì¡°
const payload = {
  roomCode: roomCode,
  userId: userIdRef.current ? Number(userIdRef.current) : null,
  username: localStorage.getItem('userNickname') || undefined,
  content: message,
};

// ì „ì†¡ ëª©ì ì§€
client.publish({
  destination: `/ws/chat.${roomCode}`,  // ğŸ¯ ë°±ì—”ë“œ ì—”ë“œí¬ì¸íŠ¸
  body: JSON.stringify(payload),
});
```

### **2. ğŸ“¥ ë©”ì‹œì§€ ìˆ˜ì‹  êµ¬ì¡° (ChatContext.tsx)**

**ìœ„ì¹˜**: `front/src/stores/ChatContext.tsx` ë¼ì¸ 150-168

```typescript
// ìˆ˜ì‹  ì²˜ë¦¬
client.subscribe(destination, (msg: IMessage) => {
  const data = JSON.parse(msg.body) as ChatMessage;  // ğŸ¯ ìˆ˜ì‹  ë°ì´í„° íŒŒì‹±
  // ... ì¤‘ë³µ ë°©ì§€ ë¡œì§
  setMessages((prev) => [...prev, data]);
});
```

### **3. ğŸ“‹ ë©”ì‹œì§€ íƒ€ì… ì •ì˜**

**ìœ„ì¹˜**: `front/src/types/index.ts` ë¼ì¸ 221-230

```typescript
export interface ChatMessage {
  id: string;
  roomCode: string;
  userId: number;
  username?: string;
  content: string;
  createdAt: string;     // ISO
  type?: 'user' | 'bot';
  timestamp?: string;
}
```

## ğŸ”„ êµ¬ì¡° ë³€ê²½ ì‹œ ìˆ˜ì •í•  íŒŒì¼ë“¤

### **í”„ë¡ íŠ¸ì—”ë“œ ìˆ˜ì • íŒŒì¼**

1. **`front/src/types/index.ts`** 
   - `ChatMessage` ì¸í„°í˜ì´ìŠ¤ ìˆ˜ì •
   - ìƒˆë¡œìš´ í•„ë“œ ì¶”ê°€/ì œê±°

2. **`front/src/stores/ChatContext.tsx`**
   - ì „ì†¡ payload êµ¬ì¡° ë³€ê²½ (ë¼ì¸ 191-196)
   - ìˆ˜ì‹  ë°ì´í„° íŒŒì‹± ë¡œì§ ë³€ê²½ (ë¼ì¸ 152)

3. **`front/src/components/chat/ChatSection.tsx`**
   - ë©”ì‹œì§€ ë Œë”ë§ ë¡œì§ ìˆ˜ì •
   - UI í‘œì‹œ ë°©ì‹ ë³€ê²½

### **ë°±ì—”ë“œ í™•ì¸ í¬ì¸íŠ¸**

```java
// ì˜ˆìƒ ë°±ì—”ë“œ êµ¬ì¡°
@MessageMapping("/chat.{roomCode}")  // ğŸ¯ ìˆ˜ì‹  ì—”ë“œí¬ì¸íŠ¸
public void handleMessage(@DestinationVariable String roomCode, ChatMessageDto message) {
    // ì²˜ë¦¬ ë¡œì§
}

@SendTo("/topic/chat.{roomCode}")    // ğŸ¯ ë¸Œë¡œë“œìºìŠ¤íŠ¸ ëª©ì ì§€
public ChatMessageDto broadcastMessage(ChatMessageDto message) {
    return message;
}
```

## ğŸ› ï¸ êµ¬ì²´ì ì¸ ìˆ˜ì • ì˜ˆì‹œ

### **ìƒˆë¡œìš´ í•„ë“œ ì¶”ê°€ ì‹œ (ì˜ˆ: ë©”ì‹œì§€ íƒ€ì…)**

1. **íƒ€ì… ì •ì˜ ìˆ˜ì •**:
```typescript
// front/src/types/index.ts
export interface ChatMessage {
  id: string;
  roomCode: string;
  userId: number;
  username?: string;
  content: string;
  createdAt: string;
  type?: 'user' | 'bot' | 'system';  // ğŸ†• ìƒˆ íƒ€ì… ì¶”ê°€
  messageType?: 'text' | 'image' | 'recommendation';  // ğŸ†• ë©”ì‹œì§€ ì¢…ë¥˜
  timestamp?: string;
}
```

2. **ì „ì†¡ payload ìˆ˜ì •**:
```typescript
// front/src/stores/ChatContext.tsx
const payload = {
  roomCode: roomCode,
  userId: userIdRef.current ? Number(userIdRef.current) : null,
  username: localStorage.getItem('userNickname') || undefined,
  content: message,
  messageType: 'text',  // ğŸ†• ìƒˆ í•„ë“œ ì¶”ê°€
};
```

ì´ë ‡ê²Œ í•˜ë©´ ì±„íŒ… êµ¬ì¡°ë¥¼ ì²´ê³„ì ìœ¼ë¡œ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤! ğŸš€

----------------------------------------------------

ì±„íŒ…ì˜ ìš”ì²­ ë°”ë””ì—ëŠ”
userId: Long, 
content: String
isAi: Boolean
ì´ë ‡ê²Œ ìˆì–´ì•¼ í•¨

isAiëŠ” ë´‡ ë²„íŠ¼ ëˆ„ë¥´ë©´ í•´ë‹¹ ê°’ì´ trueê°€ ë˜ëŠ” ê±°ì„.
ê·¸ë¦¬ê³  ëˆ„êµ°ê°€ê°€ ë²„íŠ¼ ëˆ„ë¥´ë©´ ë°© ì•ˆì˜ ë‹¤ë¥¸ ì‚¬ëŒë“¤ì€ ë²„íŠ¼ ë¹„í™œì„±í™” ë¨
ê·¸ë¦¬ê³  ì „ì†¡í•˜ë©´ ë´‡ë²„íŠ¼ ì•ˆëˆ„ë¥¸ ìƒíƒœê°€ ë˜ê³  ë´‡ì˜ ì±„íŒ… ë°˜í™˜ê³¼ ì¶”ì²œ íŒ¨ë„ ë¦¬ìŠ¤íŠ¸ì—…ì´ ë¨

{
  id: 1,
  userId: 3,
  username: "guest asdjfhejhwufhwelfhwhefkhkwefhj",
  roomCode: "7d58fw",
  content: "ì œê°€ ì¶”ì²œí•œ ì‹ë‹¹ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤. ì™¼ìª½ ì‚¬ì´ë“œë°”ì™€ ì§€ë„ì—ì„œ ì‹ë‹¹ì„ í™•ì¸í•´ë³´ì„¸ìš”.",
  createdAt: "2025-08-14 13:25:15",
	places: [
		{ 
			"placeId": 311754447, 
			"placeName": "í”„ë¡œí‹°ë„ˆ ì—­ì‚¼ì—­ì ", 
			"kakaoUrl": "http://place.map.kakao.com/311754447", 
			"x": "127.03623962192782", 
			"y": "37.50011045955869",
			"address": "ì„œìš¸ ê°•ë‚¨êµ¬ ì—­ì‚¼ë™ 737",
			"roadAddress": "ì„œìš¸ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ 152",
			"phone": "070-4114-7958",
			"categoryDetail": "ì¼ì‹/ëˆê¹ŒìŠ¤",
			"menu": ["ì¹˜ì¦ˆ ëˆê¹ŒìŠ¤", "ì¼ì‹ ëˆì¹´ì¸ ", "ìƒì„ ê¹ŒìŠ¤", "í•¨ë°•ê¹ŒìŠ¤"],
			"mood": ["ì•„ëŠ‘í•œ", "ê¹”ë”í•œ", "í¸ì•ˆí•œ"],
			"feature": ["ì¹˜ì¦ˆê°€ í˜ëŸ¬ë„˜ì¹˜ëŠ” ë°”ì‚­í•œ ëˆê¹ŒìŠ¤", "4p ëˆê¹ŒìŠ¤ ë©”ë‰´", "í”„ë¼ì´ë¹—ë£¸", "ìœ ì•„ìš© ì˜ì"],
			"purpose": ["ê°€ì¡± ì™¸ì‹", "ë‹¨ì²´ íšŒì‹", "ëª¨ì„"]
		}
		{},
		...
	]
}

ì‘ë‹µì€ ìœ„ì²˜ëŸ¼ ì±„íŒ… êµ¬ì¡°ì™€ ê°™ì€ ë‹µë³€ì´ ì˜´(ë³´í†µ ì‚¬ìš©ìë“¤ê³¼ ê°™ì§€ë§Œ places í‚¤ê°’ì´ ìˆì„ ìˆ˜ë„ ìˆê³  ì—†ì„ ìˆ˜ë„ ìˆìŒ.(ë°±ì—”ë“œ ì¥ì†Œ ë‹µë³€ê³¼ ë˜‘ê°™ì€ ìš”ì†Œë“¤ì´ ë¦¬ìŠ¤íŠ¸ë¡œ ë¬¶ì—¬ì„œ ì˜´)
1. ë§Œì•½ places ê°’ì„ ì¤€ë‹¤ë©´ recommendPanelì„ ìë™ìœ¼ë¡œ ì—´ë¦¬ê²Œ í•˜ê³  í•´ë‹¹í•˜ëŠ” ë¦¬ìŠ¤íŠ¸ë¥¼ ì¹´ë“œ ì»´í¬ë„ŒíŠ¸ì— ë‹´ì•„ì„œ ë°˜í™˜í•´ì•¼ í•¨.
2. placesê°€ ìˆê±°ë‚˜ ì—†ê±°ë‚˜ contentëŠ” ë°˜í™˜ì´ ë í…ë°, ê·¸ê±´ ë‹¤ë¥¸ ì‚¬ìš©ìë“¤ì²˜ëŸ¼ ì±„íŒ… ë§í’ì„ ìœ¼ë¡œ ë°˜í™˜ë˜ì–´ì•¼ í•¨
